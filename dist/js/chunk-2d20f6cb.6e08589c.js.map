{"version":3,"sources":["webpack:///./src/components/ManageUnit.vue","webpack:///./src/components/ManageUnit.vue?26f4"],"names":["class","type","data-bs-toggle","data-bs-target","style","role","scope","id","data-bs-backdrop","data-bs-keyboard","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","novalidate","selected","isLoading","users","user","index","key","name","rank","emtlevel","getUserData","deleUser","placeholder","create","required","email","pattern","passwords","disabled","addUser","aria-describedby","nameInput","rankInput","emtInput","editUser","setup","store","unit","state","$UserAPI","targetUserId","uid","token","adminMode","passwordVerifie","auth","onAuthStateChanged","value","getIdToken","then","idToken","console","log","data","verifyUser","res","result","getUsers","filterArray","filter","el","catch","err","alert","router","push","password","createUser","userId","updateUser","deleteUser","render"],"mappings":"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","file":"js/chunk-2d20f6cb.6e08589c.js","sourcesContent":["<template>\n  <div class=\"d-flex justify-content-between align-items-center\">\n    <div class=\"h1 mt-3\">管理分隊成員</div>\n    <div class=\"mt-3 me-4\">\n      <button\n        type=\"button\"\n        class=\"btn btn-primary\"\n        data-bs-toggle=\"modal\"\n        data-bs-target=\"#staticBackdrop2\"\n      >\n        + 新增成員\n      </button>\n    </div>\n  </div>\n  <div class=\"d-flex align-items-center justify-content-center\">\n    <div v-if=\"isLoading\" class=\"text-center mt-5 text-white\">\n      <div class=\"h1 text-center\">資料處理中 .....</div>\n      <div\n        class=\"spinner-border text-primary\"\n        style=\"width: 5rem; height: 5rem\"\n        role=\"status\"\n      >\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n    <table v-else class=\"table table-dark table-striped\">\n      <thead>\n        <tr>\n          <th scope=\"col\">No.</th>\n          <th scope=\"col\">姓名</th>\n          <th scope=\"col\">級職</th>\n          <th scope=\"col\">emt</th>\n          <th scope=\"col\">編輯</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(user, index) in users\" :key=\"user.id\">\n          <th scope=\"row\">{{ index + 1 }}</th>\n          <td>{{ user.name }}</td>\n          <td>{{ user.rank }}</td>\n          <td>{{ user.emtlevel }}</td>\n          <td>\n            <!-- Button trigger modal -->\n            <button\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-bs-toggle=\"modal\"\n              data-bs-target=\"#editUserModal\"\n              @click=\"getUserData(user.id, index)\"\n            >\n              修改\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-danger\"\n              @click=\"deleUser(user.id)\"\n            >\n              刪除\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <!-- Modal -->\n  <div\n    class=\"modal fade\"\n    id=\"staticBackdrop2\"\n    data-bs-backdrop=\"static\"\n    data-bs-keyboard=\"false\"\n    tabindex=\"-1\"\n    aria-labelledby=\"staticBackdropLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content text-dark\">\n        <div class=\"modal-header\">\n          <h2 class=\"modal-title fw-bold\" id=\"staticBackdropLabel\">新增成員</h2>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <form class=\"needs-validation\" novalidate>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">姓名</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"請輸入 姓名 ..\"\n                id=\"create.3\"\n                v-model=\"create.name\"\n                required\n              />\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">E-mail</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"create\"\n                placeholder=\"請輸入 email ..\"\n                v-model=\"create.email\"\n                pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\"\n                required\n              />\n              <div class=\"valid-feedback feedback-pos\">Looks good!</div>\n              <div class=\"invalid-feedback feedback-pos\">\n                Please input valid email ID\n              </div>\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">密碼</label>\n              <input\n                type=\"password\"\n                class=\"form-control\"\n                placeholder=\"請輸入 密碼 ..\"\n                id=\"create2\"\n                v-model=\"create.passwords\"\n                required\n              />\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">級職</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"exampleInputPassword1\"\n                v-model=\"create.rank\"\n                placeholder=\"請輸入 級職 ..\"\n                required\n              />\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">EMT</label>\n              <select\n                class=\"form-select\"\n                aria-label=\"Default select example\"\n                v-model=\"create.emtlevel\"\n                required\n              >\n                <option selected>請選擇</option>\n                <option>T1</option>\n                <option>T2</option>\n                <option>TP</option>\n              </select>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            關閉\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            data-bs-dismiss=\"modal\"\n            :disabled=\"\n              create.passwords == '' ||\n              create.emtlevel == '' ||\n              create.name == '' ||\n              create.email == '' ||\n              create.rank == ''\n            \"\n            @click=\"addUser()\"\n          >\n            新增\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Modal1 -->\n  <div\n    class=\"modal fade editUserModal\"\n    id=\"editUserModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content text-dark\">\n        <div class=\"modal-header\">\n          <h2 class=\"modal-title fw-bold\" id=\"exampleModalLabel\">修改資料</h2>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <form>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">姓名</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"nameInput\"\n                aria-describedby=\"輸入姓名\"\n                v-model=\"nameInput\"\n                required\n              />\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">級職</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"exampleInputPassword2\"\n                v-model=\"rankInput\"\n                required\n              />\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">EMT</label>\n              <select\n                class=\"form-select\"\n                aria-label=\"Default select example\"\n                v-model=\"emtInput\"\n                required\n              >\n                <option selected>請選擇</option>\n                <option>T1</option>\n                <option>T2</option>\n                <option>TP</option>\n              </select>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            關閉\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"editUser()\"\n            data-bs-dismiss=\"modal\"\n          >\n            儲存修改\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, ref } from \"@vue/reactivity\";\nimport { computed, inject } from \"@vue/runtime-core\";\nimport firebase from \"firebase/app\";\nimport router from \"../router\";\nimport { useStore } from \"vuex\";\nexport default {\n  setup() {\n    const users = ref([]);\n    const store = useStore();\n    const unit = computed(() => {\n      return store.state.unit;\n    });\n    const $UserAPI = inject(\"$UserAPI\");\n\n    //編輯個別user需要資料\n    const targetUserId = ref(\"\");\n    const nameInput = ref(\"\");\n    const rankInput = ref(\"\");\n    const emtInput = ref(\"\");\n\n    const uid = reactive({ uid: \"\" });\n    const token = ref(\"\");\n    const adminMode = ref(false);\n    const passwordVerifie = ref(false);\n    const isLoading = ref(false);\n    const create = reactive({\n      name: \"\",\n      unit: \"\",\n      emtlevel: \"\",\n      rank: \"\",\n      email: \"\",\n      passwords: \"\",\n      token: \"\",\n    });\n\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        isLoading.value = true;\n        uid.uid = user.uid;\n        user.getIdToken().then((idToken) => {\n          console.log(idToken);\n          let data = {\n            data: {\n              token: idToken,\n              unit: unit.value,\n            },\n          };\n          token.value = idToken;\n          $UserAPI.verifyUser(data, token.value).then((res) => {\n            adminMode.value = res.data.result.result;\n          });\n          $UserAPI\n            .getUsers(data, token.value)\n            .then((res) => {\n              let filterArray = res.data.result.data.filter((el) => {\n                return el.rank != \"承辦警消\";\n              });\n              users.value = filterArray;\n              isLoading.value = false;\n            })\n            .catch((err) => {\n              alert(err);\n            });\n        });\n      } else {\n        console.log(\"無登入\");\n        router.push(\"/\");\n      }\n    });\n\n    // 修改用的\n    const getUserData = (uid, index) => {\n      let user = users.value[index];\n      targetUserId.value = uid;\n      nameInput.value = user.name;\n      emtInput.value = user.emtlevel;\n      rankInput.value = user.rank;\n    };\n\n    const addUser = async () => {\n      isLoading.value = true;\n      let data = {\n        data: {\n          name: create.name,\n          rank: create.rank,\n          emtlevel: create.emtlevel,\n          unit: unit.value,\n          email: create.email,\n          password: create.passwords,\n          token: token.value,\n        },\n      };\n      $UserAPI\n        .createUser(data, token.value)\n        .then(() => {\n          $UserAPI.getUsers(data, token.value).then((res) => {\n            users.value = res.data.result.data;\n            isLoading.value = false;\n          });\n        })\n        .catch((err) => {\n          alert(\"操作錯誤 : \" + err);\n          isLoading.value = false;\n        });\n      create.name = \"\";\n      create.email = \"\";\n      create.passwords = \"\";\n      create.emtlevel = \"\";\n      create.rank = \"\";\n    };\n\n    const editUser = () => {\n      isLoading.value = true;\n      let data = {\n        data: {\n          userId: targetUserId.value,\n          name: nameInput.value,\n          rank: rankInput.value,\n          emtlevel: emtInput.value,\n          unit: unit.value,\n          token: token.value,\n        },\n      };\n      $UserAPI\n        .updateUser(data, token.value)\n        .then((res) => {\n          console.log(res.data.result.result);\n          $UserAPI.getUsers(data, token.value).then((res) => {\n            users.value = res.data.result.data;\n            isLoading.value = false;\n          });\n        })\n        .catch((err) => {\n          alert(err);\n        });\n    };\n\n    const deleUser = (id) => {\n      isLoading.value = true;\n      let data = { data: { uid: id, token: token.value } };\n      console.log(\"received data \", data);\n      $UserAPI\n        .deleteUser(data, token.value)\n        .then((res) => {\n          console.log(res.data.result.result);\n          $UserAPI.getUsers(data, token.value).then((res) => {\n            users.value = res.data.result.data;\n            isLoading.value = false;\n          });\n        })\n        .catch((err) => {\n          alert(err);\n        });\n    };\n    return {\n      users,\n      create,\n      nameInput,\n      rankInput,\n      emtInput,\n      targetUserId,\n      passwordVerifie,\n      isLoading,\n      getUserData,\n      editUser,\n      deleUser,\n      addUser,\n    };\n  },\n};\n</script>\n\n<style></style>\n","import { render } from \"./ManageUnit.vue?vue&type=template&id=12256fb8\"\nimport script from \"./ManageUnit.vue?vue&type=script&lang=js\"\nexport * from \"./ManageUnit.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}