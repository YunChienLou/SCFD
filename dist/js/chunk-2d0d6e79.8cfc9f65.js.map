{"version":3,"sources":["webpack:///./src/views/EditFireFighters.vue","webpack:///./src/views/EditFireFighters.vue?e455"],"names":["class","type","data-bs-toggle","data-bs-target","style","role","scope","id","data-bs-backdrop","data-bs-keyboard","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","novalidate","isLoading","firefighters","user","index","key","name","getUserData","deleUser","placeholder","create","required","disabled","addUser","aria-describedby","nameInput","editUser","setup","store","$FirefighterAPI","unitVuex","state","unit","tokenVuex","token","verifyVuex","dispatch","targetUserId","passwordVerifie","afterGetUnit","console","log","value","enumValue","data","getFirefighters","then","res","result","catch","err","failResponse","target","JSON","parse","stringify","createFirefighter","userId","updateFirefighter","uid","deleteFirefighter","render"],"mappings":"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","file":"js/chunk-2d0d6e79.8cfc9f65.js","sourcesContent":["<template>\n  <div class=\"d-flex justify-content-between align-items-center\">\n    <div class=\"h1 mt-3\">管理警消成員</div>\n    <div class=\"mt-3 me-4\">\n      <button\n        type=\"button\"\n        class=\"btn btn-primary\"\n        data-bs-toggle=\"modal\"\n        data-bs-target=\"#staticBackdrop2\"\n      >\n        + 新增警消\n      </button>\n    </div>\n  </div>\n  <div v-if=\"isLoading\" class=\"text-center mt-5 text-white\">\n    <div class=\"h1 text-center\">資料處理中 .....</div>\n    <div\n      class=\"spinner-border text-primary\"\n      style=\"width: 5rem; height: 5rem\"\n      role=\"status\"\n    >\n      <span class=\"visually-hidden\">Loading...</span>\n    </div>\n  </div>\n  <table v-else class=\"table table-dark table-striped\">\n    <thead>\n      <tr>\n        <th scope=\"col\">No.</th>\n        <th scope=\"col\">姓名</th>\n        <!-- <th scope=\"col\">級職</th>\n        <th scope=\"col\">emt</th> -->\n        <th class=\"text-center me-3\" scope=\"col\">編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(user, index) in firefighters\" :key=\"user.id\">\n        <th scope=\"row\">{{ index + 1 }}</th>\n        <td>{{ user.name }}</td>\n        <!-- <td>{{ user.rank }}</td>\n        <td>{{ user.emtlevel }}</td> -->\n        <td class=\"text-end\">\n          <!-- Button trigger modal -->\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary me-1\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#editUserModal\"\n            @click=\"getUserData(index)\"\n          >\n            修改\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-danger me-3\"\n            @click=\"deleUser(user.id)\"\n          >\n            刪除\n          </button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <!-- Modal -->\n  <div\n    class=\"modal fade\"\n    id=\"staticBackdrop2\"\n    data-bs-backdrop=\"static\"\n    data-bs-keyboard=\"false\"\n    tabindex=\"-1\"\n    aria-labelledby=\"staticBackdropLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content text-dark\">\n        <div class=\"modal-header\">\n          <h2 class=\"modal-title fw-bold\" id=\"staticBackdropLabel\">新增成員</h2>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <form class=\"needs-validation\" novalidate>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">姓名</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"請輸入 姓名 ..\"\n                id=\"create.3\"\n                v-model=\"create.name\"\n                required\n              />\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            關閉\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            data-bs-dismiss=\"modal\"\n            :disabled=\"create.name == ''\"\n            @click=\"addUser()\"\n          >\n            新增\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Modal1 -->\n  <div\n    class=\"modal fade editUserModal\"\n    id=\"editUserModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content text-dark\">\n        <div class=\"modal-header\">\n          <h2 class=\"modal-title fw-bold\" id=\"exampleModalLabel\">修改資料</h2>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <form>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">姓名</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"nameInput\"\n                aria-describedby=\"輸入姓名\"\n                v-model=\"nameInput\"\n                required\n              />\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            關閉\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"editUser()\"\n            data-bs-dismiss=\"modal\"\n          >\n            儲存修改\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, inject, onMounted } from \"@vue/runtime-core\";\nimport { reactive, ref } from \"@vue/reactivity\";\nimport { useStore } from \"vuex\";\nimport { unitNameEnum } from \"@/util/Enum\";\nexport default {\n  setup() {\n    const store = useStore();\n    const $FirefighterAPI = inject(\"$FirefighterAPI\");\n    const firefighters = ref([]);\n    const isLoading = ref(false);\n    const unitVuex = computed(() => {\n      return store.state.unit;\n    });\n    const tokenVuex = computed(() => {\n      return store.state.token;\n    });\n    // const testGetters = computed(\n    //   () => store.getters[\"getUserData\"]\n    // );\n\n    const verifyVuex = () => {\n      return store.dispatch(\"verify\");\n    };\n\n    const nameInput = ref(\"\");\n    const targetUserId = ref(\"\");\n\n    const passwordVerifie = ref(false);\n    const create = reactive({\n      name: \"\",\n    });\n    const afterGetUnit = () => {\n      console.log(\"start execute afterGetUnit\");\n      isLoading.value = true;\n      let unit = unitVuex.value;\n      let enumValue = unitNameEnum[unit];\n      let data = {\n        data: {\n          token: tokenVuex.value,\n          unit: enumValue,\n        },\n      };\n      $FirefighterAPI\n        .getFirefighters(data, tokenVuex.value)\n        .then((res) => {\n          firefighters.value = res.data.result.data;\n          isLoading.value = false;\n        })\n        .catch((err) => {\n          failResponse(err);\n        });\n    };\n    const failResponse = () => {\n      isLoading.value = false;\n      // alert(err + \";\\n通知三重志工 羅云謙  0919539740\");\n    };\n    const getUserData = async (index) => {\n      let target = JSON.parse(JSON.stringify(firefighters.value))[index];\n      console.log(target, index);\n      nameInput.value = target.name;\n      targetUserId.value = target.id;\n    };\n    const addUser = async () => {\n      isLoading.value = true;\n      let data = {\n        data: {\n          name: create.name,\n          unit: unitNameEnum[unitVuex.value],\n          token: tokenVuex.value,\n        },\n      };\n      console.log(data.data);\n      $FirefighterAPI\n        .createFirefighter(data, tokenVuex.value)\n        .then((res) => {\n          console.log(res);\n          afterGetUnit();\n        })\n        .catch((err) => {\n          console.log(err);\n          failResponse(err);\n        });\n    };\n    const editUser = () => {\n      isLoading.value = true;\n      let data = {\n        data: {\n          name: nameInput.value,\n          token: tokenVuex.value,\n          unit: unitNameEnum[unitVuex.value],\n          userId: targetUserId.value,\n        },\n      };\n      console.log(data.data, \"update data\");\n      $FirefighterAPI\n        .updateFirefighter(data, tokenVuex.value)\n        .then((res) => {\n          console.log(res);\n          afterGetUnit();\n        })\n        .catch((err) => {\n          console.log(err);\n          failResponse(err);\n        });\n    };\n    const deleUser = (id) => {\n      isLoading.value = true;\n      let data = {\n        data: {\n          uid: id,\n          unit: unitNameEnum[unitVuex.value],\n          token: tokenVuex.value,\n        },\n      };\n      $FirefighterAPI\n        .deleteFirefighter(data, tokenVuex.value)\n        .then((res) => {\n          console.log(res);\n          afterGetUnit();\n        })\n        .catch((err) => {\n          console.log(err);\n          failResponse(err);\n        });\n    };\n    verifyVuex();\n    onMounted(() => {\n      console.log(\"onMounted\");\n      if (unitVuex.value != null || tokenVuex.value != null) {\n        afterGetUnit();\n      }\n    });\n    return {\n      store,\n      create,\n      isLoading,\n      nameInput,\n      targetUserId,\n      passwordVerifie,\n      firefighters,\n      unitVuex,\n      tokenVuex,\n      getUserData,\n      editUser,\n      deleUser,\n      addUser,\n    };\n  },\n};\n</script>\n\n<style></style>\n","import { render } from \"./EditFireFighters.vue?vue&type=template&id=4b5b50dc\"\nimport script from \"./EditFireFighters.vue?vue&type=script&lang=js\"\nexport * from \"./EditFireFighters.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}