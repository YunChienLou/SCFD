(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f6cb"],{b425:function(e,t,a){"use strict";a.r(t);a("b0c0");var l=a("7a23"),c=Object(l["g"])("div",{class:"d-flex justify-content-between align-items-center"},[Object(l["g"])("div",{class:"h1 mt-3"},"管理分隊成員"),Object(l["g"])("div",{class:"mt-3 me-4"},[Object(l["g"])("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop2"}," + 新增成員 ")])],-1),n={class:"d-flex align-items-center justify-content-center"},s={key:0,class:"text-center mt-5 text-white"},o=Object(l["g"])("div",{class:"h1 text-center"},"資料處理中 .....",-1),r=Object(l["g"])("div",{class:"spinner-border text-primary",style:{width:"5rem",height:"5rem"},role:"status"},[Object(l["g"])("span",{class:"visually-hidden"},"Loading...")],-1),d=[o,r],b={key:1,class:"table table-dark table-striped"},i=Object(l["g"])("thead",null,[Object(l["g"])("tr",null,[Object(l["g"])("th",{scope:"col"},"No."),Object(l["g"])("th",{scope:"col"},"姓名"),Object(l["g"])("th",{scope:"col"},"級職"),Object(l["g"])("th",{scope:"col"},"emt"),Object(l["g"])("th",{scope:"col"},"編輯")])],-1),u={scope:"row"},m=["onClick"],O=["onClick"],j={class:"modal fade",id:"staticBackdrop2","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},g={class:"modal-dialog modal-dialog-centered"},p={class:"modal-content text-dark"},v=Object(l["g"])("div",{class:"modal-header"},[Object(l["g"])("h2",{class:"modal-title fw-bold",id:"staticBackdropLabel"},"新增成員"),Object(l["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},k={class:"needs-validation",novalidate:""},h={class:"mb-3"},y=Object(l["g"])("label",{class:"form-label"},"姓名",-1),U={class:"mb-3"},w=Object(l["g"])("label",{class:"form-label"},"E-mail",-1),x=Object(l["g"])("div",{class:"valid-feedback feedback-pos"},"Looks good!",-1),I=Object(l["g"])("div",{class:"invalid-feedback feedback-pos"}," Please input valid email ID ",-1),C={class:"mb-3"},T=Object(l["g"])("label",{class:"form-label"},"密碼",-1),V={class:"mb-3"},q=Object(l["g"])("label",{class:"form-label"},"級職",-1),L={class:"mb-3"},E=Object(l["g"])("label",{class:"form-label"},"EMT",-1),M=Object(l["g"])("option",{selected:""},"請選擇",-1),K=Object(l["g"])("option",null,"T1",-1),P=Object(l["g"])("option",null,"T2",-1),B=Object(l["g"])("option",null,"TP",-1),D=[M,K,P,B],J={class:"modal-footer"},z=Object(l["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1),A=["disabled"],R={class:"modal fade editUserModal",id:"editUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$={class:"modal-dialog modal-dialog-centered"},N={class:"modal-content text-dark"},S=Object(l["g"])("div",{class:"modal-header"},[Object(l["g"])("h2",{class:"modal-title fw-bold",id:"exampleModalLabel"},"修改資料"),Object(l["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_={class:"modal-body"},F={class:"mb-3"},G=Object(l["g"])("label",{class:"form-label"},"姓名",-1),H={class:"mb-3"},Q=Object(l["g"])("label",{class:"form-label"},"級職",-1),W={class:"mb-3"},X=Object(l["g"])("label",{class:"form-label"},"EMT",-1),Y=Object(l["g"])("option",{selected:""},"請選擇",-1),Z=Object(l["g"])("option",null,"T1",-1),ee=Object(l["g"])("option",null,"T2",-1),te=Object(l["g"])("option",null,"TP",-1),ae=[Y,Z,ee,te],le={class:"modal-footer"},ce=Object(l["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1);function ne(e,t,a,o,r,M){return Object(l["v"])(),Object(l["f"])(l["a"],null,[c,Object(l["g"])("div",n,[o.isLoading?(Object(l["v"])(),Object(l["f"])("div",s,d)):(Object(l["v"])(),Object(l["f"])("table",b,[i,Object(l["g"])("tbody",null,[(Object(l["v"])(!0),Object(l["f"])(l["a"],null,Object(l["B"])(o.users,(function(e,t){return Object(l["v"])(),Object(l["f"])("tr",{key:e.id},[Object(l["g"])("th",u,Object(l["E"])(t+1),1),Object(l["g"])("td",null,Object(l["E"])(e.name),1),Object(l["g"])("td",null,Object(l["E"])(e.rank),1),Object(l["g"])("td",null,Object(l["E"])(e.emtlevel),1),Object(l["g"])("td",null,[Object(l["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-toggle":"modal","data-bs-target":"#editUserModal",onClick:function(a){return o.getUserData(e.id,t)}}," 修改 ",8,m),Object(l["g"])("button",{type:"button",class:"btn btn-danger",onClick:function(t){return o.deleUser(e.id)}}," 刪除 ",8,O)])])})),128))])]))]),Object(l["g"])("div",j,[Object(l["g"])("div",g,[Object(l["g"])("div",p,[v,Object(l["g"])("div",f,[Object(l["g"])("form",k,[Object(l["g"])("div",h,[y,Object(l["O"])(Object(l["g"])("input",{type:"text",class:"form-control",placeholder:"請輸入 姓名 ..",id:"create.3","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.create.name=e}),required:""},null,512),[[l["K"],o.create.name]])]),Object(l["g"])("div",U,[w,Object(l["O"])(Object(l["g"])("input",{type:"text",class:"form-control",id:"create",placeholder:"請輸入 email ..","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.create.email=e}),pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",required:""},null,512),[[l["K"],o.create.email]]),x,I]),Object(l["g"])("div",C,[T,Object(l["O"])(Object(l["g"])("input",{type:"password",class:"form-control",placeholder:"請輸入 密碼 ..",id:"create2","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.create.passwords=e}),required:""},null,512),[[l["K"],o.create.passwords]])]),Object(l["g"])("div",V,[q,Object(l["O"])(Object(l["g"])("input",{type:"text",class:"form-control",id:"exampleInputPassword1","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.create.rank=e}),placeholder:"請輸入 級職 ..",required:""},null,512),[[l["K"],o.create.rank]])]),Object(l["g"])("div",L,[E,Object(l["O"])(Object(l["g"])("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.create.emtlevel=e}),required:""},D,512),[[l["J"],o.create.emtlevel]])])])]),Object(l["g"])("div",J,[z,Object(l["g"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",disabled:""==o.create.passwords||""==o.create.emtlevel||""==o.create.name||""==o.create.email||""==o.create.rank,onClick:t[5]||(t[5]=function(e){return o.addUser()})}," 新增 ",8,A)])])])]),Object(l["g"])("div",R,[Object(l["g"])("div",$,[Object(l["g"])("div",N,[S,Object(l["g"])("div",_,[Object(l["g"])("form",null,[Object(l["g"])("div",F,[G,Object(l["O"])(Object(l["g"])("input",{type:"text",class:"form-control",id:"nameInput","aria-describedby":"輸入姓名","onUpdate:modelValue":t[6]||(t[6]=function(e){return o.nameInput=e}),required:""},null,512),[[l["K"],o.nameInput]])]),Object(l["g"])("div",H,[Q,Object(l["O"])(Object(l["g"])("input",{type:"text",class:"form-control",id:"exampleInputPassword2","onUpdate:modelValue":t[7]||(t[7]=function(e){return o.rankInput=e}),required:""},null,512),[[l["K"],o.rankInput]])]),Object(l["g"])("div",W,[X,Object(l["O"])(Object(l["g"])("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[8]||(t[8]=function(e){return o.emtInput=e}),required:""},ae,512),[[l["J"],o.emtInput]])])])]),Object(l["g"])("div",le,[ce,Object(l["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=function(e){return o.editUser()}),"data-bs-dismiss":"modal"}," 儲存修改 ")])])])])],64)}var se=a("1da1"),oe=(a("96cf"),a("4de4"),a("a1e9")),re=a("5c40"),de=a("260b"),be=a("a18c"),ie=a("5502"),ue={setup:function(){var e=Object(oe["m"])([]),t=Object(ie["b"])(),a=Object(re["e"])((function(){return t.state.unit})),l=Object(re["t"])("$UserAPI"),c=Object(oe["m"])(""),n=Object(oe["m"])(""),s=Object(oe["m"])(""),o=Object(oe["m"])(""),r=Object(oe["l"])({uid:""}),d=Object(oe["m"])(""),b=Object(oe["m"])(!1),i=Object(oe["m"])(!1),u=Object(oe["m"])(!1),m=Object(oe["l"])({name:"",unit:"",emtlevel:"",rank:"",email:"",passwords:"",token:""});de["a"].auth().onAuthStateChanged((function(t){t?(u.value=!0,r.uid=t.uid,t.getIdToken().then((function(t){console.log(t);var c={data:{token:t,unit:a.value}};d.value=t,l.verifyUser(c,d.value).then((function(e){b.value=e.data.result.result})),l.getUsers(c,d.value).then((function(t){var a=t.data.result.data.filter((function(e){return"承辦警消"!=e.rank}));e.value=a,u.value=!1})).catch((function(e){alert(e)}))}))):(console.log("無登入"),be["a"].push("/"))}));var O=function(t,a){var l=e.value[a];c.value=t,n.value=l.name,o.value=l.emtlevel,s.value=l.rank},j=function(){var t=Object(se["a"])(regeneratorRuntime.mark((function t(){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:u.value=!0,c={data:{name:m.name,rank:m.rank,emtlevel:m.emtlevel,unit:a.value,email:m.email,password:m.passwords,token:d.value}},l.createUser(c,d.value).then((function(){l.getUsers(c,d.value).then((function(t){e.value=t.data.result.data,u.value=!1}))})).catch((function(e){alert("操作錯誤 : "+e),u.value=!1})),m.name="",m.email="",m.passwords="",m.emtlevel="",m.rank="";case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){u.value=!0;var t={data:{userId:c.value,name:n.value,rank:s.value,emtlevel:o.value,unit:a.value,token:d.value}};l.updateUser(t,d.value).then((function(a){console.log(a.data.result.result),l.getUsers(t,d.value).then((function(t){e.value=t.data.result.data,u.value=!1}))})).catch((function(e){alert(e)}))},p=function(t){u.value=!0;var a={data:{uid:t,token:d.value}};console.log("received data ",a),l.deleteUser(a,d.value).then((function(t){console.log(t.data.result.result),l.getUsers(a,d.value).then((function(t){e.value=t.data.result.data,u.value=!1}))})).catch((function(e){alert(e)}))};return{users:e,create:m,nameInput:n,rankInput:s,emtInput:o,targetUserId:c,passwordVerifie:i,isLoading:u,getUserData:O,editUser:g,deleUser:p,addUser:j}}};ue.render=ne;t["default"]=ue}}]);
//# sourceMappingURL=chunk-2d20f6cb.6e08589c.js.map