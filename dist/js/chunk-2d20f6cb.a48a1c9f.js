(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f6cb"],{b425:function(e,t,a){"use strict";a.r(t);a("b0c0");var l=a("7a23"),c=Object(l["g"])("div",{class:"d-flex justify-content-between align-items-center"},[Object(l["g"])("div",{class:"h1 mt-3"},"管理分隊成員"),Object(l["g"])("div",{class:"mt-3 me-4"},[Object(l["g"])("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop2"}," + 新增成員 ")])],-1),n={class:"d-flex align-items-center justify-content-center"},s={key:0,class:"text-center mt-5 text-white"},o=Object(l["g"])("div",{class:"h1 text-center"},"資料處理中 .....",-1),i=Object(l["g"])("div",{class:"spinner-border text-primary",style:{width:"5rem",height:"5rem"},role:"status"},[Object(l["g"])("span",{class:"visually-hidden"},"Loading...")],-1),r=[o,i],d={key:1,class:"table table-dark table-striped"},b=Object(l["g"])("thead",null,[Object(l["g"])("tr",null,[Object(l["g"])("th",{scope:"col"},"No."),Object(l["g"])("th",{scope:"col"},"姓名"),Object(l["g"])("th",{scope:"col"},"級職"),Object(l["g"])("th",{scope:"col"},"emt"),Object(l["g"])("th",{scope:"col"},"編輯")])],-1),u={scope:"row"},m=["onClick"],g=["onClick"],j={class:"modal fade",id:"staticBackdrop2","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},O={class:"modal-dialog modal-dialog-centered"},p={class:"modal-content text-dark"},v=Object(l["g"])("div",{class:"modal-header"},[Object(l["g"])("h2",{class:"modal-title fw-bold",id:"staticBackdropLabel"},"新增成員"),Object(l["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},h={class:"needs-validation",novalidate:""},k={class:"mb-3"},y=Object(l["g"])("label",{class:"form-label"},"姓名",-1),w={class:"mb-3"},U=Object(l["g"])("label",{class:"form-label"},"E-mail",-1),x=Object(l["g"])("div",{class:"valid-feedback feedback-pos"},"Looks good!",-1),L=Object(l["g"])("div",{class:"invalid-feedback feedback-pos"}," Please input valid email ID ",-1),I={class:"mb-3"},D=Object(l["g"])("label",{class:"form-label"},"密碼",-1),T={class:"mb-3"},V=Object(l["g"])("label",{class:"form-label"},"級職",-1),q={class:"mb-3"},C=Object(l["g"])("label",{class:"form-label"},"EMT",-1),N=Object(l["g"])("option",{selected:""},"請選擇",-1),M=Object(l["g"])("option",null,"T1",-1),S=Object(l["g"])("option",null,"T2",-1),P=Object(l["g"])("option",null,"TP",-1),z=[N,M,S,P],B={class:"modal-footer"},E=Object(l["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1),R=["disabled"],A={class:"modal fade editUserModal",id:"editUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},H={class:"modal-dialog modal-dialog-centered"},J={class:"modal-content text-dark"},$=Object(l["g"])("div",{class:"modal-header"},[Object(l["g"])("h2",{class:"modal-title fw-bold",id:"exampleModalLabel"},"修改資料"),Object(l["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_={class:"modal-body"},F={class:"mb-3"},G=Object(l["g"])("label",{class:"form-label"},"姓名",-1),K={class:"mb-3"},Q=Object(l["g"])("label",{class:"form-label"},"級職",-1),W={class:"mb-3"},X=Object(l["g"])("label",{class:"form-label"},"EMT",-1),Y=Object(l["g"])("option",{selected:""},"請選擇",-1),Z=Object(l["g"])("option",null,"T1",-1),ee=Object(l["g"])("option",null,"T2",-1),te=Object(l["g"])("option",null,"TP",-1),ae=[Y,Z,ee,te],le={class:"modal-footer"},ce=Object(l["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1);function ne(e,t,a,o,i,N){return Object(l["u"])(),Object(l["f"])(l["a"],null,[c,Object(l["g"])("div",n,[o.isLoading?(Object(l["u"])(),Object(l["f"])("div",s,r)):(Object(l["u"])(),Object(l["f"])("table",d,[b,Object(l["g"])("tbody",null,[(Object(l["u"])(!0),Object(l["f"])(l["a"],null,Object(l["A"])(o.users,(function(e,t){return Object(l["u"])(),Object(l["f"])("tr",{key:e.id},[Object(l["g"])("th",u,Object(l["D"])(t+1),1),Object(l["g"])("td",null,Object(l["D"])(e.name),1),Object(l["g"])("td",null,Object(l["D"])(e.rank),1),Object(l["g"])("td",null,Object(l["D"])(e.emtlevel),1),Object(l["g"])("td",null,[Object(l["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-toggle":"modal","data-bs-target":"#editUserModal",onClick:function(a){return o.getUserData(e.id,t)}}," 修改 ",8,m),Object(l["g"])("button",{type:"button",class:"btn btn-danger",onClick:function(t){return o.deleUser(e.id)}}," 刪除 ",8,g)])])})),128))])]))]),Object(l["g"])("div",j,[Object(l["g"])("div",O,[Object(l["g"])("div",p,[v,Object(l["g"])("div",f,[Object(l["g"])("form",h,[Object(l["g"])("div",k,[y,Object(l["L"])(Object(l["g"])("input",{type:"text",class:"form-control",placeholder:"請輸入 姓名 ..",id:"create.3","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.create.name=e}),required:""},null,512),[[l["I"],o.create.name]])]),Object(l["g"])("div",w,[U,Object(l["L"])(Object(l["g"])("input",{type:"text",class:"form-control",id:"create",placeholder:"請輸入 email ..","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.create.email=e}),pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",required:""},null,512),[[l["I"],o.create.email]]),x,L]),Object(l["g"])("div",I,[D,Object(l["L"])(Object(l["g"])("input",{type:"password",class:"form-control",placeholder:"請輸入 密碼 ..",id:"create2","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.create.passwords=e}),required:""},null,512),[[l["I"],o.create.passwords]])]),Object(l["g"])("div",T,[V,Object(l["L"])(Object(l["g"])("input",{type:"text",class:"form-control",id:"exampleInputPassword1","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.create.rank=e}),placeholder:"請輸入 級職 ..",required:""},null,512),[[l["I"],o.create.rank]])]),Object(l["g"])("div",q,[C,Object(l["L"])(Object(l["g"])("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.create.emtlevel=e}),required:""},z,512),[[l["H"],o.create.emtlevel]])])])]),Object(l["g"])("div",B,[E,Object(l["g"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",disabled:""==o.create.passwords||""==o.create.emtlevel||""==o.create.name||""==o.create.email||""==o.create.rank,onClick:t[5]||(t[5]=function(e){return o.addUser()})}," 新增 ",8,R)])])])]),Object(l["g"])("div",A,[Object(l["g"])("div",H,[Object(l["g"])("div",J,[$,Object(l["g"])("div",_,[Object(l["g"])("form",null,[Object(l["g"])("div",F,[G,Object(l["L"])(Object(l["g"])("input",{type:"text",class:"form-control",id:"nameInput","aria-describedby":"輸入姓名","onUpdate:modelValue":t[6]||(t[6]=function(e){return o.nameInput=e}),required:""},null,512),[[l["I"],o.nameInput]])]),Object(l["g"])("div",K,[Q,Object(l["L"])(Object(l["g"])("input",{type:"text",class:"form-control",id:"exampleInputPassword2","onUpdate:modelValue":t[7]||(t[7]=function(e){return o.rankInput=e}),required:""},null,512),[[l["I"],o.rankInput]])]),Object(l["g"])("div",W,[X,Object(l["L"])(Object(l["g"])("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[8]||(t[8]=function(e){return o.emtInput=e}),required:""},ae,512),[[l["H"],o.emtInput]])])])]),Object(l["g"])("div",le,[ce,Object(l["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=function(e){return o.editUser()}),"data-bs-dismiss":"modal"}," 儲存修改 ")])])])])],64)}var se=a("1da1"),oe=(a("96cf"),a("4de4"),a("a1e9")),ie=a("5c40"),re=a("5502"),de={setup:function(){var e=Object(oe["m"])([]),t=Object(re["b"])(),a=Object(ie["e"])((function(){return t.state.unit})),l=Object(ie["t"])("$UserAPI"),c=Object(oe["m"])(""),n=Object(oe["m"])(""),s=Object(oe["m"])(""),o=Object(oe["m"])(""),i=Object(oe["m"])(!1),r=Object(oe["m"])(!1),d=Object(oe["l"])({name:"",unit:"",emtlevel:"",rank:"",email:"",passwords:"",token:""}),b=Object(ie["e"])((function(){return t.state.token})),u=Object(ie["e"])((function(){return t.state.unit})),m=function(){r.value=!0;var a={data:{token:b.value,unit:u.value}};l.getUsers(a,b.value).then((function(t){var a=t.data.result.data.filter((function(e){return"承辦警消"!=e.rank}));e.value=a,r.value=!1})).catch((function(e){t.dispatch("push2Notification",{msg:"載入失敗: "+e,time:(new Date).toLocaleTimeString()})}))},g=function(t,a){var l=e.value[a];c.value=t,n.value=l.name,o.value=l.emtlevel,s.value=l.rank},j=function(){var c=Object(se["a"])(regeneratorRuntime.mark((function c(){var n;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:r.value=!0,n={data:{name:d.name,rank:d.rank,emtlevel:d.emtlevel,unit:a.value,email:d.email,password:d.passwords,token:b.value}},l.createUser(n,b.value).then((function(){t.dispatch("push2Notification",{msg:"新增成功: 已加入"+n.data.name,time:(new Date).toLocaleTimeString()}),l.getUsers(n,b.value).then((function(t){e.value=t.data.result.data,r.value=!1}))})).catch((function(e){t.dispatch("push2Notification",{msg:"新增失敗: "+e,time:(new Date).toLocaleTimeString()}),r.value=!1})),d.name="",d.email="",d.passwords="",d.emtlevel="",d.rank="";case 8:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}(),O=function(){r.value=!0;var i={data:{userId:c.value,name:n.value,rank:s.value,emtlevel:o.value,unit:a.value,token:b.value}};l.updateUser(i,b.value).then((function(a){console.log(a.data.result.result),t.dispatch("push2Notification",{msg:"成功修改",time:(new Date).toLocaleTimeString()}),l.getUsers(i,b.value).then((function(t){e.value=t.data.result.data,r.value=!1}))})).catch((function(e){t.dispatch("push2Notification",{msg:"修改失敗: "+e,time:(new Date).toLocaleTimeString()})}))},p=function(c){r.value=!0;var n={data:{uid:c,token:b.value}};console.log("received data ",n),l.deleteUser(n,b.value).then((function(c){t.dispatch("push2Notification",{msg:"成功刪除: "+n.data.uid,time:(new Date).toLocaleTimeString()});var s={data:{token:b.value,unit:a.value}};console.log(c.data.result.result),l.getUsers(s,b.value).then((function(t){e.value=t.data.result.data,r.value=!1}))})).catch((function(e){t.dispatch("push2Notification",{msg:"刪除失敗: "+e,time:(new Date).toLocaleTimeString()})}))};return Object(ie["R"])(u,(function(){console.log("watcher",b.value),m()})),Object(ie["z"])((function(){m()})),{tokenVuex:b,users:e,create:d,nameInput:n,rankInput:s,emtInput:o,targetUserId:c,passwordVerifie:i,isLoading:r,getUserData:g,editUser:O,deleUser:p,addUser:j}}};de.render=ne;t["default"]=de}}]);
//# sourceMappingURL=chunk-2d20f6cb.a48a1c9f.js.map